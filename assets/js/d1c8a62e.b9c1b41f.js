"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[833],{1499:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"rules/sw002-unused-method","title":"SW002: Method appears unused","description":"Overview","source":"@site/docs/rules/sw002-unused-method.md","sourceDirName":"rules","slug":"/rules/sw002-unused-method","permalink":"/Stackworx.Analyzers/docs/rules/sw002-unused-method","draft":false,"unlisted":false,"editUrl":"https://github.com/stackworx-dotnet/Stackworx.Analyzers/edit/main/docs/docs/rules/sw002-unused-method.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"SW001: Avoid implicit DateTime \u2192 DateTimeOffset conversion","permalink":"/Stackworx.Analyzers/docs/rules/sw001-avoid-implicit-datetime-to-datetimeoffset"},"next":{"title":"SWGQL01: Static extension method validation","permalink":"/Stackworx.Analyzers/docs/rules/swgql01-static-extension-method-validation"}}');var r=i(4848),t=i(8453);const l={sidebar_position:3},o="SW002: Method appears unused",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Description",id:"description",level:2},{value:"When This Rule Triggers",id:"when-this-rule-triggers",level:2},{value:"Automatic ignore via JetBrains annotations",id:"automatic-ignore-via-jetbrains-annotations",level:3},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Examples",id:"examples",level:2},{value:"Reported (unused method)",id:"reported-unused-method",level:3},{value:"Not reported (method referenced)",id:"not-reported-method-referenced",level:3},{value:"Not reported (explicit opt-out)",id:"not-reported-explicit-opt-out",level:3},{value:"Caveats / When SW002 is (and isn\u2019t) a good fit",id:"caveats--when-sw002-is-and-isnt-a-good-fit",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Related Rules",id:"related-rules",level:2}];function c(e){const n={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sw002-method-appears-unused",children:"SW002: Method appears unused"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Rule ID:"})," SW002",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Category:"})," Usage",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Severity:"})," Warning",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Status:"})," Disabled by default"]}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["This rule flags ",(0,r.jsx)(n.em,{children:"source-declared"})," methods that have ",(0,r.jsx)(n.strong,{children:"no call sites / references in the current compilation"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"It\u2019s meant to help you find dead code after refactoring, especially in codebases where features are mostly self-contained."}),"\n",(0,r.jsx)(n.h2,{id:"when-this-rule-triggers",children:"When This Rule Triggers"}),"\n",(0,r.jsx)(n.p,{children:"The analyzer reports a diagnostic when all of the following are true:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The method is a ",(0,r.jsx)(n.strong,{children:"normal method"})," (",(0,r.jsx)(n.code,{children:"MethodKind.Ordinary"}),") declared in source (not compiler generated)"]}),"\n",(0,r.jsxs)(n.li,{children:["The method is ",(0,r.jsx)(n.strong,{children:"not"})," an override"]}),"\n",(0,r.jsxs)(n.li,{children:["The method is ",(0,r.jsx)(n.strong,{children:"not"})," an explicit interface implementation"]}),"\n",(0,r.jsxs)(n.li,{children:["The method is ",(0,r.jsx)(n.strong,{children:"not"})," referenced via:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["a direct invocation (",(0,r.jsx)(n.code,{children:"obj.M()"})," / ",(0,r.jsx)(n.code,{children:"M()"}),"), or"]}),"\n",(0,r.jsxs)(n.li,{children:["a method-group / delegate reference (",(0,r.jsx)(n.code,{children:"Action a = M;"}),")",(0,r.jsx)(n.br,{}),"\n","within the same compilation"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"automatic-ignore-via-jetbrains-annotations",children:"Automatic ignore via JetBrains annotations"}),"\n",(0,r.jsx)(n.p,{children:"If any of the following symbols are annotated, the method is ignored:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The method itself, ",(0,r.jsx)(n.strong,{children:"or"})]}),"\n",(0,r.jsxs)(n.li,{children:["Its containing type, ",(0,r.jsx)(n.strong,{children:"or"})]}),"\n",(0,r.jsx)(n.li,{children:"Any outer containing type (for nested types)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Supported attribute names:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JetBrains.Annotations.PublicAPIAttribute"})," / ",(0,r.jsx)(n.code,{children:"PublicAPI"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JetBrains.Annotations.UsedImplicitlyAttribute"})," / ",(0,r.jsx)(n.code,{children:"UsedImplicitly"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,r.jsx)(n.p,{children:"Unused methods tend to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Make features harder to understand (\u201cCan I delete this?\u201d)"}),"\n",(0,r.jsx)(n.li,{children:"Increase maintenance cost and cognitive load"}),"\n",(0,r.jsx)(n.li,{children:"Hide real intent (people are afraid to refactor if too much dead code accumulates)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"reported-unused-method",children:"Reported (unused method)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class C\n{\n    void Dead() { } // SW002\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"not-reported-method-referenced",children:"Not reported (method referenced)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class C\n{\n    void Alive() { }\n\n    void Caller()\n    {\n        Alive();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"not-reported-explicit-opt-out",children:"Not reported (explicit opt-out)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"using JetBrains.Annotations;\n\npublic class C\n{\n    [PublicAPI]\n    void CalledBySomeoneElse() { }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"caveats--when-sw002-is-and-isnt-a-good-fit",children:"Caveats / When SW002 is (and isn\u2019t) a good fit"}),"\n",(0,r.jsxs)(n.p,{children:["SW002 is intentionally simple: it only knows what can be proven ",(0,r.jsx)(n.em,{children:"inside the compilation being analyzed"}),". That makes it powerful in the right context, and noisy in others."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monorepos / large solution graphs"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"SW002 doesn\u2019t do \u201cwhole repo reachability\u201d. It only sees references inside the project/compilation currently being analyzed."}),"\n",(0,r.jsxs)(n.li,{children:["In big solutions, you\u2019ll often have shared projects where methods are only called by ",(0,r.jsx)(n.em,{children:"other"})," projects. Those can look \u201cunused\u201d from the producing project\u2019s point of view."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Apps / services (not libraries) vs. published libraries"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["This rule fits best when the project is an ",(0,r.jsx)(n.em,{children:"application"})," where most code is expected to be used internally."]}),"\n",(0,r.jsxs)(n.li,{children:["In libraries meant to be consumed by external code, many (especially ",(0,r.jsx)(n.code,{children:"public"}),") methods can appear unused in the library compilation but are still valid API."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["No ",(0,r.jsx)(n.code,{children:"InternalsVisibleTo"}),", reflection, DI, source generators, dynamic invocation"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If methods are reached indirectly (reflection, frameworks calling by convention, dependency injection, test projects using ",(0,r.jsx)(n.code,{children:"InternalsVisibleTo"}),", etc.), SW002 may produce false positives."]}),"\n",(0,r.jsxs)(n.li,{children:["Recommendation: mark those methods/types with ",(0,r.jsx)(n.code,{children:"[PublicAPI]"})," / ",(0,r.jsx)(n.code,{children:"[UsedImplicitly]"}),", or disable SW002 for those files/folders."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Works best with Feature Folders"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If your solution organizes code by \u201cfeature folders\u201d (vertical slices) and keeps cross-feature dependencies minimal, SW002 becomes a practical way to keep each feature clean."}),"\n",(0,r.jsx)(n.li,{children:"In this setup, unused methods are usually truly dead because the feature\u2019s call graph tends to be contained."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["This rule is ",(0,r.jsx)(n.strong,{children:"disabled by default"}),". To enable it:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SW002.severity = warning\n"})}),"\n",(0,r.jsx)(n.p,{children:"To disable it (after enabling globally), or to silence it in specific areas:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SW002.severity = none\n"})}),"\n",(0,r.jsx)(n.p,{children:"To treat it as an error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SW002.severity = error\n"})}),"\n",(0,r.jsx)(n.h2,{id:"related-rules",children:"Related Rules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"None"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);