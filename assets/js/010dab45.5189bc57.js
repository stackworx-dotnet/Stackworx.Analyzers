"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[558],{3304:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"rules/sw0001-avoid-implicit-datetime-to-datetimeoffset","title":"SW0001: Avoid implicit DateTime \u2192 DateTimeOffset conversion","description":"Overview","source":"@site/docs/rules/sw0001-avoid-implicit-datetime-to-datetimeoffset.md","sourceDirName":"rules","slug":"/rules/sw0001-avoid-implicit-datetime-to-datetimeoffset","permalink":"/Stackworx.Analyzers/docs/rules/sw0001-avoid-implicit-datetime-to-datetimeoffset","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rules/sw0001-avoid-implicit-datetime-to-datetimeoffset.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/Stackworx.Analyzers/docs/rules/overview"},"next":{"title":"SWGQL01: Static extension method validation","permalink":"/Stackworx.Analyzers/docs/rules/swgql01-static-extension-method-validation"}}');var s=t(4848),o=t(8453);const r={sidebar_position:2},l="SW0001: Avoid implicit DateTime \u2192 DateTimeOffset conversion",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Description",id:"description",level:2},{value:"When This Rule Triggers",id:"when-this-rule-triggers",level:2},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"The Problem",id:"the-problem",level:3},{value:"How to Fix",id:"how-to-fix",level:2},{value:"For Local DateTime",id:"for-local-datetime",level:3},{value:"For UTC DateTime",id:"for-utc-datetime",level:3},{value:"For DateTime with specific offset",id:"for-datetime-with-specific-offset",level:3},{value:"For nullable DateTime",id:"for-nullable-datetime",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Related Rules",id:"related-rules",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const i={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"sw0001-avoid-implicit-datetime--datetimeoffset-conversion",children:"SW0001: Avoid implicit DateTime \u2192 DateTimeOffset conversion"})}),"\n",(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Rule ID:"})," SW0001",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Category:"})," Usage",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Severity:"})," Warning",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Status:"})," Enabled by default"]}),"\n",(0,s.jsx)(i.h2,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(i.p,{children:["This rule flags implicit conversions from ",(0,s.jsx)(i.code,{children:"System.DateTime"})," to ",(0,s.jsx)(i.code,{children:"System.DateTimeOffset"}),". These implicit conversions can hide important semantic information about the offset and Kind properties of the DateTime value, leading to subtle bugs and unexpected behavior."]}),"\n",(0,s.jsx)(i.h2,{id:"when-this-rule-triggers",children:"When This Rule Triggers"}),"\n",(0,s.jsx)(i.p,{children:"The analyzer reports a diagnostic when:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["An implicit conversion from ",(0,s.jsx)(i.code,{children:"DateTime"})," to ",(0,s.jsx)(i.code,{children:"DateTimeOffset"})," is detected in your code"]}),"\n",(0,s.jsx)(i.li,{children:"The conversion is user code (not compiler-generated)"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,s.jsx)(i.h3,{id:"the-problem",children:"The Problem"}),"\n",(0,s.jsxs)(i.p,{children:["When you implicitly convert a ",(0,s.jsx)(i.code,{children:"DateTime"})," to ",(0,s.jsx)(i.code,{children:"DateTimeOffset"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-csharp",children:"DateTime dt = DateTime.Now;\nDateTimeOffset dto = dt;  // \u26a0\ufe0f Implicit conversion - SW0001\n"})}),"\n",(0,s.jsx)(i.p,{children:"The conversion doesn't preserve or communicate intent about:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["What the original DateTime's ",(0,s.jsx)(i.code,{children:"Kind"})," property is (Local, UTC, Unspecified)"]}),"\n",(0,s.jsx)(i.li,{children:"What offset should be assumed for the DateTimeOffset"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"This can lead to:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Incorrect timezone handling"}),"\n",(0,s.jsx)(i.li,{children:"Data loss or corruption when persisting values"}),"\n",(0,s.jsx)(i.li,{children:"Subtle bugs that are hard to diagnose"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"how-to-fix",children:"How to Fix"}),"\n",(0,s.jsxs)(i.p,{children:["Make the conversion explicit using one of the ",(0,s.jsx)(i.code,{children:"DateTimeOffset"})," constructors:"]}),"\n",(0,s.jsx)(i.h3,{id:"for-local-datetime",children:"For Local DateTime"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-csharp",children:"DateTime dt = DateTime.Now;\n// \u2705 Explicit conversion showing local time zone intent\nDateTimeOffset dto = new DateTimeOffset(dt);\n"})}),"\n",(0,s.jsx)(i.h3,{id:"for-utc-datetime",children:"For UTC DateTime"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-csharp",children:"DateTime dt = DateTime.UtcNow;\n// \u2705 Explicit conversion showing UTC intent\nDateTimeOffset dto = new DateTimeOffset(dt, TimeSpan.Zero);\n"})}),"\n",(0,s.jsx)(i.h3,{id:"for-datetime-with-specific-offset",children:"For DateTime with specific offset"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-csharp",children:"DateTime dt = GetDateTime();\nTimeSpan offset = TimeSpan.FromHours(-5);\n// \u2705 Explicit conversion with explicit offset\nDateTimeOffset dto = new DateTimeOffset(dt, offset);\n"})}),"\n",(0,s.jsx)(i.h3,{id:"for-nullable-datetime",children:"For nullable DateTime"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-csharp",children:"DateTime? dt = DateTime.Now;\n// \u2705 Handle nullable explicitly\nDateTimeOffset? dto = dt.HasValue \n    ? new DateTimeOffset(dt.Value) \n    : null;\n"})}),"\n",(0,s.jsx)(i.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(i.p,{children:["This rule is enabled by default. To disable it, add to your ",(0,s.jsx)(i.code,{children:".editorconfig"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SW0001.severity = none\n"})}),"\n",(0,s.jsx)(i.p,{children:"To change severity to error:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SW0001.severity = error\n"})}),"\n",(0,s.jsx)(i.h2,{id:"related-rules",children:"Related Rules"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"None"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/system.datetimeoffset",children:"DateTime vs DateTimeOffset"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/system.datetime.kind",children:"DateTime.Kind property"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,i,t)=>{t.d(i,{R:()=>r,x:()=>l});var n=t(6540);const s={},o=n.createContext(s);function r(e){const i=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:i},e.children)}}}]);