"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[324],{1219:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"rules/swgql04-graphql-duplicate-extension-field","title":"SWGQL04: Duplicate GraphQL extension field","description":"Overview","source":"@site/docs/rules/swgql04-graphql-duplicate-extension-field.md","sourceDirName":"rules","slug":"/rules/swgql04-graphql-duplicate-extension-field","permalink":"/Stackworx.Analyzers/docs/rules/swgql04-graphql-duplicate-extension-field","draft":false,"unlisted":false,"editUrl":"https://github.com/stackworx-dotnet/Stackworx.Analyzers/edit/main/docs/docs/rules/swgql04-graphql-duplicate-extension-field.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"SW101: Forbidden namespace reference","permalink":"/Stackworx.Analyzers/docs/rules/sw101-forbidden-namespace-reference"},"next":{"title":"SW102: Forbidden namespace using","permalink":"/Stackworx.Analyzers/docs/rules/sw102-forbidden-namespace-using"}}');var t=s(4848),l=s(8453);const r={sidebar_position:6},a="SWGQL04: Duplicate GraphQL extension field",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Description",id:"description",level:2},{value:"What Counts as a \u201cDuplicate\u201d",id:"what-counts-as-a-duplicate",level:2},{value:"Field name normalization",id:"field-name-normalization",level:3},{value:"When This Rule Triggers",id:"when-this-rule-triggers",level:2},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"How to Fix",id:"how-to-fix",level:2},{value:"Example",id:"example",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Related Rules",id:"related-rules",level:2}];function c(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"swgql04-duplicate-graphql-extension-field",children:"SWGQL04: Duplicate GraphQL extension field"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Rule ID:"})," SWGQL04",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Category:"})," GraphQL",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Severity:"})," Error",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Status:"})," Enabled by default"]}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["This rule detects duplicate GraphQL field resolver methods defined across multiple ",(0,t.jsx)(n.code,{children:"[ExtendObjectType<T>]"})," extension classes for the same GraphQL type."]}),"\n",(0,t.jsx)(n.p,{children:"In HotChocolate, extension methods can be used to add fields to an existing GraphQL type. If two methods (possibly in different extension classes) map to the same GraphQL field name for the same extended type, the schema can become ambiguous and is likely to fail schema initialization."}),"\n",(0,t.jsx)(n.p,{children:"The analyzer flags duplicates at compilation end and reports the duplicate location(s) as additional diagnostic locations."}),"\n",(0,t.jsx)(n.h2,{id:"what-counts-as-a-duplicate",children:"What Counts as a \u201cDuplicate\u201d"}),"\n",(0,t.jsx)(n.p,{children:"The analyzer considers two resolver methods duplicates when all of the following are true:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Both methods are declared in classes annotated with ",(0,t.jsx)(n.code,{children:"ExtendObjectType"})," (generic or constructor-argument form)."]}),"\n",(0,t.jsxs)(n.li,{children:["Both methods extend the ",(0,t.jsx)(n.strong,{children:"same"})," CLR type ",(0,t.jsx)(n.code,{children:"T"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Both methods normalize to the ",(0,t.jsx)(n.strong,{children:"same field name"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"field-name-normalization",children:"Field name normalization"}),"\n",(0,t.jsx)(n.p,{children:"To better match common HotChocolate naming patterns, field names are normalized as follows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A leading ",(0,t.jsx)(n.code,{children:"Get"})," prefix is removed."]}),"\n",(0,t.jsxs)(n.li,{children:["A trailing ",(0,t.jsx)(n.code,{children:"Async"})," suffix is removed."]}),"\n",(0,t.jsxs)(n.li,{children:["Comparison is ",(0,t.jsx)(n.strong,{children:"case-insensitive"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Examples:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GetUser()"})," \u2192 ",(0,t.jsx)(n.code,{children:"User"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UserAsync()"})," \u2192 ",(0,t.jsx)(n.code,{children:"User"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GetUserAsync()"})," \u2192 ",(0,t.jsx)(n.code,{children:"User"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"when-this-rule-triggers",children:"When This Rule Triggers"}),"\n",(0,t.jsx)(n.p,{children:"The analyzer reports a diagnostic when:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Two or more eligible resolver methods (public/internal, ordinary methods) in ",(0,t.jsx)(n.code,{children:"[ExtendObjectType<T>]"})," classes map to the same normalized field name for the same extended type."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,t.jsx)(n.p,{children:"Duplicate fields often happen during refactoring or when multiple teams add resolvers to the same GraphQL type:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"One field was moved to a new extension class, but the old resolver wasn\u2019t removed."}),"\n",(0,t.jsx)(n.li,{children:"Two features accidentally define the same logical field."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Catching duplicates at compile time avoids schema build failures and confusing runtime behavior."}),"\n",(0,t.jsx)(n.h2,{id:"how-to-fix",children:"How to Fix"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Remove or rename one of the duplicate resolver methods."}),"\n",(0,t.jsx)(n.li,{children:"Merge resolvers into a single extension class where appropriate."}),"\n",(0,t.jsx)(n.li,{children:"If you intended two different fields, rename one of the methods so the resulting GraphQL field names differ after normalization."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using HotChocolate;\nusing HotChocolate.Types;\n\npublic class User\n{\n    public int Id { get; set; }\n}\n\n[ExtendObjectType(typeof(User))]\npublic static class UserExtensionsA\n{\n    public static int GetId([Parent] User user) => user.Id;\n}\n\n[ExtendObjectType(typeof(User))]\npublic static class UserExtensionsB\n{\n    // \u274c SWGQL04 - duplicates "Id" (Get prefix is ignored)\n    public static int Id([Parent] User user) => user.Id;\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"This rule is enabled by default as an error. To change its severity:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SWGQL04.severity = warning\n"})}),"\n",(0,t.jsx)(n.p,{children:"To disable it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SWGQL04.severity = none\n"})}),"\n",(0,t.jsx)(n.h2,{id:"related-rules",children:"Related Rules"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./swgql01-static-extension-method-validation",children:"SWGQL01 - Field extension methods on non-static classes must be instance methods"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./swgql03-graphql-extension-class-static",children:"SWGQL03 - Class with [ExtendObjectType] must be static"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var i=s(6540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);