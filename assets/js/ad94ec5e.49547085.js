"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[913],{862:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"rules/sw101-forbidden-namespace-reference","title":"SW101: Forbidden namespace reference","description":"Overview","source":"@site/docs/rules/sw101-forbidden-namespace-reference.md","sourceDirName":"rules","slug":"/rules/sw101-forbidden-namespace-reference","permalink":"/Stackworx.Analyzers/docs/rules/sw101-forbidden-namespace-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/stackworx-dotnet/Stackworx.Analyzers/edit/main/docs/docs/rules/sw101-forbidden-namespace-reference.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"SWGQL03: GraphQL extension class static","permalink":"/Stackworx.Analyzers/docs/rules/swgql03-graphql-extension-class-static"},"next":{"title":"SW102: Forbidden namespace using","permalink":"/Stackworx.Analyzers/docs/rules/sw102-forbidden-namespace-using"}}');var s=r(4848),a=r(8453);const t={sidebar_position:6},l="SW101: Forbidden namespace reference",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Description",id:"description",level:2},{value:"When This Rule Triggers",id:"when-this-rule-triggers",level:2},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Enforcing Architectural Boundaries",id:"enforcing-architectural-boundaries",level:3},{value:"How to Fix",id:"how-to-fix",level:2},{value:"Option 1: Use the public API",id:"option-1-use-the-public-api",level:3},{value:"Option 2: Move code into the feature",id:"option-2-move-code-into-the-feature",level:3},{value:"Option 3: Promote to public API",id:"option-3-promote-to-public-api",level:3},{value:"Example",id:"example",level:2},{value:"Feature Internal Namespace Naming",id:"feature-internal-namespace-naming",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Related Rules",id:"related-rules",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"sw101-forbidden-namespace-reference",children:"SW101: Forbidden namespace reference"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rule ID:"})," SW101",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Category:"})," Architecture",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Severity:"})," Warning",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Status:"})," Currently disabled"]}),"\n",(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["This rule prevents code from referencing types in feature-internal namespaces from outside the feature. Features can define internal namespaces (typically named with ",(0,s.jsx)(n.code,{children:".Internal"})," suffix) that should only be accessed from within the feature."]}),"\n",(0,s.jsx)(n.h2,{id:"when-this-rule-triggers",children:"When This Rule Triggers"}),"\n",(0,s.jsx)(n.p,{children:"The analyzer reports a diagnostic when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Code outside a feature tries to reference or import a type from the feature's internal namespace"}),"\n",(0,s.jsx)(n.li,{children:"The internal namespace is defined with the feature-internal naming convention"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,s.jsx)(n.h3,{id:"enforcing-architectural-boundaries",children:"Enforcing Architectural Boundaries"}),"\n",(0,s.jsx)(n.p,{children:"Feature-internal namespaces define the internal API of a feature:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"They help maintain clean architecture by separating public contracts from implementation details"}),"\n",(0,s.jsx)(n.li,{children:"They prevent accidental coupling between features through private implementation"}),"\n",(0,s.jsx)(n.li,{children:"They make refactoring safer since internal details can change without affecting external code"}),"\n",(0,s.jsx)(n.li,{children:"They establish clear ownership of code across different features"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Enforcing these boundaries with analyzers ensures your architecture stays clean as the codebase grows."}),"\n",(0,s.jsx)(n.h2,{id:"how-to-fix",children:"How to Fix"}),"\n",(0,s.jsx)(n.h3,{id:"option-1-use-the-public-api",children:"Option 1: Use the public API"}),"\n",(0,s.jsx)(n.p,{children:"If you need functionality from a feature, use its public namespace:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c WRONG - Referencing internal namespace\nusing Users.Internal;\n\nvar user = new InternalUserHelper().GetUser(id);\n\n// \u2705 CORRECT - Using public API\nusing Users;\n\nvar user = new UserService().GetUser(id);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"option-2-move-code-into-the-feature",children:"Option 2: Move code into the feature"}),"\n",(0,s.jsx)(n.p,{children:"If you're working on the same feature, put your code in the correct location:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c WRONG - Outside the feature accessing internal namespace\n// File: Orders/OrderProcessor.cs\nusing Users.Internal;\n\n// \u2705 CORRECT - Within the feature\n// File: Users/Internal/UserHelper.cs\n// or\n// File: Users/UserService.cs (public API)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"option-3-promote-to-public-api",children:"Option 3: Promote to public API"}),"\n",(0,s.jsx)(n.p,{children:"If functionality should be shared, move it from the internal namespace to the public API:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c WRONG - Kept as internal\n// File: Users/Internal/UserValidator.cs\ninternal static class UserValidator { }\n\n// \u2705 CORRECT - Promoted to public\n// File: Users/UserValidator.cs\npublic static class UserValidator { }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// File: Users/Internal/InternalUserCache.cs\nnamespace Users.Internal;\n\ninternal class InternalUserCache\n{\n    // Implementation details...\n}\n\n// File: Orders/OrderService.cs\nnamespace Orders;\n\n// \u26a0\ufe0f SW101 - Referencing internal namespace\nusing Users.Internal;\n\npublic class OrderService\n{\n    private InternalUserCache cache = new();  // \u274c Violates SW101\n}\n\n// \u2705 CORRECT - Use public API\nusing Users;\n\npublic class OrderService\n{\n    private IUserService userService;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"feature-internal-namespace-naming",children:"Feature Internal Namespace Naming"}),"\n",(0,s.jsx)(n.p,{children:"Internal namespaces typically follow this pattern:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"FeatureName.Internal\nFeatureName.Internal.Implementation\nFeatureName.Internal.Helpers\n"})}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"PaymentProcessing.Internal"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Users.Internal.Security"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Inventory.Internal.Cache"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.p,{children:"This rule is currently disabled to avoid false positives. To enable it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SW101.severity = warning\n"})}),"\n",(0,s.jsx)(n.p,{children:"To treat violations as errors:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[*.cs]\ndotnet_diagnostic.SW101.severity = error\n"})}),"\n",(0,s.jsx)(n.h2,{id:"related-rules",children:"Related Rules"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./sw102-forbidden-namespace-using",children:"SW102 - Forbidden using to feature-internal namespace"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Clean Architecture principles"}),"\n",(0,s.jsx)(n.li,{children:"Feature-driven development patterns"}),"\n",(0,s.jsx)(n.li,{children:"Namespace organization best practices"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var i=r(6540);const s={},a=i.createContext(s);function t(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);